import{r as t,a as B,b as P,bs as ct,f as ft,e as ze,d as H,c as Xe,N as U,G as Dt,H as zt,L as Re,h as Tt,g as rt,bn as nt}from"./index-CsTQqO15.js";var vt=t.forwardRef(function(e,c){var v=e.height,u=e.offsetY,d=e.offsetX,S=e.children,s=e.prefixCls,o=e.onInnerResize,b=e.innerProps,h=e.rtl,R=e.extra,a={},g={display:"flex",flexDirection:"column"};return u!==void 0&&(a={height:v,position:"relative",overflow:"hidden"},g=B(B({},g),{},P(P(P(P(P({transform:"translateY(".concat(u,"px)")},h?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:a},t.createElement(ct,{onResize:function(m){var l=m.offsetHeight;l&&o&&o()}},t.createElement("div",ft({style:g,className:ze(P({},"".concat(s,"-holder-inner"),s)),ref:c},b),S,R)))});vt.displayName="Filler";function Ct(e){var c=e.children,v=e.setRef,u=t.useCallback(function(d){v(d)},[]);return t.cloneElement(c,{ref:u})}function Ht(e,c,v,u,d,S,s,o){var b=o.getKey;return e.slice(c,v+1).map(function(h,R){var a=c+R,g=s(h,a,{style:{width:u},offsetX:d}),i=b(h);return t.createElement(Ct,{key:i,setRef:function(l){return S(h,l)}},g)})}function It(e,c,v){var u=e.length,d=c.length,S,s;if(u===0&&d===0)return null;u<d?(S=e,s=c):(S=c,s=e);var o={__EMPTY_ITEM__:!0};function b(m){return m!==void 0?v(m):o}for(var h=null,R=Math.abs(u-d)!==1,a=0;a<s.length;a+=1){var g=b(S[a]),i=b(s[a]);if(g!==i){h=a,R=R||g!==b(s[a+1]);break}}return h===null?null:{index:h,multiple:R}}function Pt(e,c,v){var u=t.useState(e),d=H(u,2),S=d[0],s=d[1],o=t.useState(null),b=H(o,2),h=b[0],R=b[1];return t.useEffect(function(){var a=It(S||[],e||[],c);(a==null?void 0:a.index)!==void 0&&R(e[a.index]),s(e)},[e]),[h]}var at=(typeof navigator>"u"?"undefined":Xe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const dt=function(e,c,v,u){var d=t.useRef(!1),S=t.useRef(null);function s(){clearTimeout(S.current),d.current=!0,S.current=setTimeout(function(){d.current=!1},50)}var o=t.useRef({top:e,bottom:c,left:v,right:u});return o.current.top=e,o.current.bottom=c,o.current.left=v,o.current.right=u,function(b,h){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=b?h<0&&o.current.left||h>0&&o.current.right:h<0&&o.current.top||h>0&&o.current.bottom;return R&&a?(clearTimeout(S.current),d.current=!1):(!a||d.current)&&s(),!d.current&&a}};function Nt(e,c,v,u,d,S,s){var o=t.useRef(0),b=t.useRef(null),h=t.useRef(null),R=t.useRef(!1),a=dt(c,v,u,d);function g(f,y){if(U.cancel(b.current),!a(!1,y)){var w=f;if(!w._virtualHandled)w._virtualHandled=!0;else return;o.current+=y,h.current=y,at||w.preventDefault(),b.current=U(function(){var N=R.current?10:1;s(o.current*N,!1),o.current=0})}}function i(f,y){s(y,!0),at||f.preventDefault()}var m=t.useRef(null),l=t.useRef(null);function E(f){if(e){U.cancel(l.current),l.current=U(function(){m.current=null},2);var y=f.deltaX,w=f.deltaY,N=f.shiftKey,O=y,x=w;(m.current==="sx"||!m.current&&N&&w&&!y)&&(O=w,x=0,m.current="sx");var $=Math.abs(O),X=Math.abs(x);m.current===null&&(m.current=S&&$>X?"x":"y"),m.current==="y"?g(f,x):i(f,O)}}function M(f){e&&(R.current=f.detail===h.current)}return[E,M]}function Ot(e,c,v,u){var d=t.useMemo(function(){return[new Map,[]]},[e,v.id,u]),S=H(d,2),s=S[0],o=S[1],b=function(R){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,g=s.get(R),i=s.get(a);if(g===void 0||i===void 0)for(var m=e.length,l=o.length;l<m;l+=1){var E,M=e[l],f=c(M);s.set(f,l);var y=(E=v.get(f))!==null&&E!==void 0?E:u;if(o[l]=(o[l-1]||0)+y,f===R&&(g=l),f===a&&(i=l),g!==void 0&&i!==void 0)break}return{top:o[g-1]||0,bottom:o[i]}};return b}var $t=function(){function e(){zt(this,e),P(this,"maps",void 0),P(this,"id",0),P(this,"diffRecords",new Map),this.maps=Object.create(null)}return Dt(e,[{key:"set",value:function(v,u){this.diffRecords.set(v,this.maps[v]),this.maps[v]=u,this.id+=1}},{key:"get",value:function(v){return this.maps[v]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),e}();function it(e){var c=parseFloat(e);return isNaN(c)?0:c}function kt(e,c,v){var u=t.useState(0),d=H(u,2),S=d[0],s=d[1],o=t.useRef(new Map),b=t.useRef(new $t),h=t.useRef(0);function R(){h.current+=1}function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var m=function(){var M=!1;o.current.forEach(function(f,y){if(f&&f.offsetParent){var w=f.offsetHeight,N=getComputedStyle(f),O=N.marginTop,x=N.marginBottom,$=it(O),X=it(x),V=w+$+X;b.current.get(y)!==V&&(b.current.set(y,V),M=!0)}}),M&&s(function(f){return f+1})};if(i)m();else{h.current+=1;var l=h.current;Promise.resolve().then(function(){l===h.current&&m()})}}function g(i,m){var l=e(i);o.current.get(l),m?(o.current.set(l,m),a()):o.current.delete(l)}return t.useEffect(function(){return R},[]),[g,a,b.current,S]}var ut=14/15;function Bt(e,c,v){var u=t.useRef(!1),d=t.useRef(0),S=t.useRef(0),s=t.useRef(null),o=t.useRef(null),b,h=function(i){if(u.current){var m=Math.ceil(i.touches[0].pageX),l=Math.ceil(i.touches[0].pageY),E=d.current-m,M=S.current-l,f=Math.abs(E)>Math.abs(M);f?d.current=m:S.current=l;var y=v(f,f?E:M,!1,i);y&&i.preventDefault(),clearInterval(o.current),y&&(o.current=setInterval(function(){f?E*=ut:M*=ut;var w=Math.floor(f?E:M);(!v(f,w,!0)||Math.abs(w)<=.1)&&clearInterval(o.current)},16))}},R=function(){u.current=!1,b()},a=function(i){b(),i.touches.length===1&&!u.current&&(u.current=!0,d.current=Math.ceil(i.touches[0].pageX),S.current=Math.ceil(i.touches[0].pageY),s.current=i.target,s.current.addEventListener("touchmove",h,{passive:!1}),s.current.addEventListener("touchend",R,{passive:!0}))};b=function(){s.current&&(s.current.removeEventListener("touchmove",h),s.current.removeEventListener("touchend",R))},Re(function(){return e&&c.current.addEventListener("touchstart",a,{passive:!0}),function(){var g;(g=c.current)===null||g===void 0||g.removeEventListener("touchstart",a),b(),clearInterval(o.current)}},[e])}function ot(e){return Math.floor(Math.pow(e,.5))}function Ye(e,c){var v="touches"in e?e.touches[0]:e;return v[c?"pageX":"pageY"]-window[c?"scrollX":"scrollY"]}function Ft(e,c,v){t.useEffect(function(){var u=c.current;if(e&&u){var d=!1,S,s,o=function(){U.cancel(S)},b=function g(){o(),S=U(function(){v(s),g()})},h=function(i){if(!(i.target.draggable||i.button!==0)){var m=i;m._virtualHandled||(m._virtualHandled=!0,d=!0)}},R=function(){d=!1,o()},a=function(i){if(d){var m=Ye(i,!1),l=u.getBoundingClientRect(),E=l.top,M=l.bottom;if(m<=E){var f=E-m;s=-ot(f),b()}else if(m>=M){var y=m-M;s=ot(y),b()}else o()}};return u.addEventListener("mousedown",h),u.ownerDocument.addEventListener("mouseup",R),u.ownerDocument.addEventListener("mousemove",a),function(){u.removeEventListener("mousedown",h),u.ownerDocument.removeEventListener("mouseup",R),u.ownerDocument.removeEventListener("mousemove",a),o()}}},[e])}var Yt=10;function Xt(e,c,v,u,d,S,s,o){var b=t.useRef(),h=t.useState(null),R=H(h,2),a=R[0],g=R[1];return Re(function(){if(a&&a.times<Yt){if(!e.current){g(function(ne){return B({},ne)});return}S();var i=a.targetAlign,m=a.originAlign,l=a.index,E=a.offset,M=e.current.clientHeight,f=!1,y=i,w=null;if(M){for(var N=i||m,O=0,x=0,$=0,X=Math.min(c.length-1,l),V=0;V<=X;V+=1){var F=d(c[V]);x=O;var Q=v.get(F);$=x+(Q===void 0?u:Q),O=$}for(var j=N==="top"?E:M-E,ee=X;ee>=0;ee-=1){var te=d(c[ee]),I=v.get(te);if(I===void 0){f=!0;break}if(j-=I,j<=0)break}switch(N){case"top":w=x-E;break;case"bottom":w=$-M+E;break;default:{var re=e.current.scrollTop,k=re+M;x<re?y="top":$>k&&(y="bottom")}}w!==null&&s(w),w!==a.lastTop&&(f=!0)}f&&g(B(B({},a),{},{times:a.times+1,targetAlign:y,lastTop:w}))}},[a,e.current]),function(i){if(i==null){o();return}if(U.cancel(b.current),typeof i=="number")s(i);else if(i&&Xe(i)==="object"){var m,l=i.align;"index"in i?m=i.index:m=c.findIndex(function(f){return d(f)===i.key});var E=i.offset,M=E===void 0?0:E;g({times:0,index:m,offset:M,originAlign:l})}}}var lt=t.forwardRef(function(e,c){var v=e.prefixCls,u=e.rtl,d=e.scrollOffset,S=e.scrollRange,s=e.onStartMove,o=e.onStopMove,b=e.onScroll,h=e.horizontal,R=e.spinSize,a=e.containerSize,g=e.style,i=e.thumbStyle,m=e.showScrollBar,l=t.useState(!1),E=H(l,2),M=E[0],f=E[1],y=t.useState(null),w=H(y,2),N=w[0],O=w[1],x=t.useState(null),$=H(x,2),X=$[0],V=$[1],F=!u,Q=t.useRef(),j=t.useRef(),ee=t.useState(m),te=H(ee,2),I=te[0],re=te[1],k=t.useRef(),ne=function(){m===!0||m===!1||(clearTimeout(k.current),re(!0),k.current=setTimeout(function(){re(!1)},3e3))},A=S-a||0,W=a-R||0,ae=t.useMemo(function(){if(d===0||A===0)return 0;var Y=d/A;return Y*W},[d,A,W]),D=function(z){z.stopPropagation(),z.preventDefault()},K=t.useRef({top:ae,dragging:M,pageY:N,startTop:X});K.current={top:ae,dragging:M,pageY:N,startTop:X};var se=function(z){f(!0),O(Ye(z,h)),V(K.current.top),s(),z.stopPropagation(),z.preventDefault()};t.useEffect(function(){var Y=function(he){he.preventDefault()},z=Q.current,T=j.current;return z.addEventListener("touchstart",Y,{passive:!1}),T.addEventListener("touchstart",se,{passive:!1}),function(){z.removeEventListener("touchstart",Y),T.removeEventListener("touchstart",se)}},[]);var de=t.useRef();de.current=A;var pe=t.useRef();pe.current=W,t.useEffect(function(){if(M){var Y,z=function(he){var ce=K.current,Te=ce.dragging,be=ce.pageY,Me=ce.startTop;U.cancel(Y);var me=Q.current.getBoundingClientRect(),Ce=a/(h?me.width:me.height);if(Te){var q=(Ye(he,h)-be)*Ce,fe=Me;!F&&h?fe-=q:fe+=q;var Ee=de.current,ye=pe.current,He=ye?fe/ye:0,ue=Math.ceil(He*Ee);ue=Math.max(ue,0),ue=Math.min(ue,Ee),Y=U(function(){b(ue,h)})}},T=function(){f(!1),o()};return window.addEventListener("mousemove",z,{passive:!0}),window.addEventListener("touchmove",z,{passive:!0}),window.addEventListener("mouseup",T,{passive:!0}),window.addEventListener("touchend",T,{passive:!0}),function(){window.removeEventListener("mousemove",z),window.removeEventListener("touchmove",z),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T),U.cancel(Y)}}},[M]),t.useEffect(function(){return ne(),function(){clearTimeout(k.current)}},[d]),t.useImperativeHandle(c,function(){return{delayHidden:ne}});var Z="".concat(v,"-scrollbar"),_={position:"absolute",visibility:I?null:"hidden"},G={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(_.height=8,_.left=0,_.right=0,_.bottom=0,G.height="100%",G.width=R,F?G.left=ae:G.right=ae):(_.width=8,_.top=0,_.bottom=0,F?_.right=0:_.left=0,G.width="100%",G.height=R,G.top=ae),t.createElement("div",{ref:Q,className:ze(Z,P(P(P({},"".concat(Z,"-horizontal"),h),"".concat(Z,"-vertical"),!h),"".concat(Z,"-visible"),I)),style:B(B({},_),g),onMouseDown:D,onMouseMove:ne},t.createElement("div",{ref:j,className:ze("".concat(Z,"-thumb"),P({},"".concat(Z,"-thumb-moving"),M)),style:B(B({},G),i),onMouseDown:se}))}),Wt=20;function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=e/c*e;return isNaN(v)&&(v=0),v=Math.max(v,Wt),Math.floor(v)}var At=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],Vt=[],jt={overflowY:"auto",overflowAnchor:"none"};function Kt(e,c){var v=e.prefixCls,u=v===void 0?"rc-virtual-list":v,d=e.className,S=e.height,s=e.itemHeight,o=e.fullHeight,b=o===void 0?!0:o,h=e.style,R=e.data,a=e.children,g=e.itemKey,i=e.virtual,m=e.direction,l=e.scrollWidth,E=e.component,M=E===void 0?"div":E,f=e.onScroll,y=e.onVirtualScroll,w=e.onVisibleChange,N=e.innerProps,O=e.extraRender,x=e.styles,$=e.showScrollBar,X=$===void 0?"optional":$,V=Tt(e,At),F=t.useCallback(function(n){return typeof g=="function"?g(n):n==null?void 0:n[g]},[g]),Q=kt(F),j=H(Q,4),ee=j[0],te=j[1],I=j[2],re=j[3],k=!!(i!==!1&&S&&s),ne=t.useMemo(function(){return Object.values(I.maps).reduce(function(n,r){return n+r},0)},[I.id,I.maps]),A=k&&R&&(Math.max(s*R.length,ne)>S||!!l),W=m==="rtl",ae=ze(u,P({},"".concat(u,"-rtl"),W),d),D=R||Vt,K=t.useRef(),se=t.useRef(),de=t.useRef(),pe=t.useState(0),Z=H(pe,2),_=Z[0],G=Z[1],Y=t.useState(0),z=H(Y,2),T=z[0],ie=z[1],he=t.useState(!1),ce=H(he,2),Te=ce[0],be=ce[1],Me=function(){be(!0)},me=function(){be(!1)},Ce={getKey:F};function q(n){G(function(r){var p;typeof n=="function"?p=n(r):p=n;var L=pt(p);return K.current.scrollTop=L,L})}var fe=t.useRef({start:0,end:D.length}),Ee=t.useRef(),ye=Pt(D,F),He=H(ye,1),ue=He[0];Ee.current=ue;var we=t.useMemo(function(){if(!k)return{scrollHeight:void 0,start:0,end:D.length-1,offset:void 0};if(!A){var n;return{scrollHeight:((n=se.current)===null||n===void 0?void 0:n.offsetHeight)||0,start:0,end:D.length-1,offset:void 0}}for(var r=0,p,L,C,De=D.length,le=0;le<De;le+=1){var Be=D[le],_t=F(Be),tt=I.get(_t),Fe=r+(tt===void 0?s:tt);Fe>=_&&p===void 0&&(p=le,L=r),Fe>_+S&&C===void 0&&(C=le),r=Fe}return p===void 0&&(p=0,L=0,C=Math.ceil(S/s)),C===void 0&&(C=D.length-1),C=Math.min(C+1,D.length-1),{scrollHeight:r,start:p,end:C,offset:L}},[A,k,_,D,re,S]),oe=we.scrollHeight,ve=we.start,Se=we.end,We=we.offset;fe.current.start=ve,fe.current.end=Se,t.useLayoutEffect(function(){var n=I.getRecord();if(n.size===1){var r=Array.from(n.keys())[0],p=n.get(r),L=D[ve];if(L&&p===void 0){var C=F(L);if(C===r){var De=I.get(r),le=De-s;q(function(Be){return Be+le})}}}I.resetRecord()},[oe]);var ht=t.useState({width:0,height:S}),Ae=H(ht,2),J=Ae[0],mt=Ae[1],St=function(r){mt({width:r.offsetWidth,height:r.offsetHeight})},Ve=t.useRef(),je=t.useRef(),gt=t.useMemo(function(){return st(J.width,l)},[J.width,l]),Rt=t.useMemo(function(){return st(J.height,oe)},[J.height,oe]),Ie=oe-S,Pe=t.useRef(Ie);Pe.current=Ie;function pt(n){var r=n;return Number.isNaN(Pe.current)||(r=Math.min(r,Pe.current)),r=Math.max(r,0),r}var xe=_<=0,Le=_>=Ie,Ke=T<=0,Ge=T>=l,bt=dt(xe,Le,Ke,Ge),Ne=function(){return{x:W?-T:T,y:_}},Oe=t.useRef(Ne()),_e=rt(function(n){if(y){var r=B(B({},Ne()),n);(Oe.current.x!==r.x||Oe.current.y!==r.y)&&(y(r),Oe.current=r)}});function Ue(n,r){var p=n;r?(nt.flushSync(function(){ie(p)}),_e()):q(p)}function Mt(n){var r=n.currentTarget.scrollTop;r!==_&&q(r),f==null||f(n),_e()}var $e=function(r){var p=r,L=l?l-J.width:0;return p=Math.max(p,0),p=Math.min(p,L),p},Et=rt(function(n,r){r?(nt.flushSync(function(){ie(function(p){var L=p+(W?-n:n);return $e(L)})}),_e()):q(function(p){var L=p+n;return L})}),yt=Nt(k,xe,Le,Ke,Ge,!!l,Et),Ze=H(yt,2),ke=Ze[0],qe=Ze[1];Bt(k,K,function(n,r,p,L){var C=L;return bt(n,r,p)?!1:!C||!C._virtualHandled?(C&&(C._virtualHandled=!0),ke({preventDefault:function(){},deltaX:n?r:0,deltaY:n?0:r}),!0):!1}),Ft(A,K,function(n){q(function(r){return r+n})}),Re(function(){function n(p){var L=xe&&p.detail<0,C=Le&&p.detail>0;k&&!L&&!C&&p.preventDefault()}var r=K.current;return r.addEventListener("wheel",ke,{passive:!1}),r.addEventListener("DOMMouseScroll",qe,{passive:!0}),r.addEventListener("MozMousePixelScroll",n,{passive:!1}),function(){r.removeEventListener("wheel",ke),r.removeEventListener("DOMMouseScroll",qe),r.removeEventListener("MozMousePixelScroll",n)}},[k,xe,Le]),Re(function(){if(l){var n=$e(T);ie(n),_e({x:n})}},[J.width,l]);var Je=function(){var r,p;(r=Ve.current)===null||r===void 0||r.delayHidden(),(p=je.current)===null||p===void 0||p.delayHidden()},Qe=Xt(K,D,I,s,F,function(){return te(!0)},q,Je);t.useImperativeHandle(c,function(){return{nativeElement:de.current,getScrollInfo:Ne,scrollTo:function(r){function p(L){return L&&Xe(L)==="object"&&("left"in L||"top"in L)}p(r)?(r.left!==void 0&&ie($e(r.left)),Qe(r.top)):Qe(r)}}}),Re(function(){if(w){var n=D.slice(ve,Se+1);w(n,D)}},[ve,Se,D]);var wt=Ot(D,F,I,s),xt=O==null?void 0:O({start:ve,end:Se,virtual:A,offsetX:T,offsetY:We,rtl:W,getSize:wt}),Lt=Ht(D,ve,Se,l,T,ee,a,Ce),ge=null;S&&(ge=B(P({},b?"height":"maxHeight",S),jt),k&&(ge.overflowY="hidden",l&&(ge.overflowX="hidden"),Te&&(ge.pointerEvents="none")));var et={};return W&&(et.dir="rtl"),t.createElement("div",ft({ref:de,style:B(B({},h),{},{position:"relative"}),className:ae},et,V),t.createElement(ct,{onResize:St},t.createElement(M,{className:"".concat(u,"-holder"),style:ge,ref:K,onScroll:Mt,onMouseEnter:Je},t.createElement(vt,{prefixCls:u,height:oe,offsetX:T,offsetY:We,scrollWidth:l,onInnerResize:te,ref:se,innerProps:N,rtl:W,extra:xt},Lt))),A&&oe>S&&t.createElement(lt,{ref:Ve,prefixCls:u,scrollOffset:_,scrollRange:oe,rtl:W,onScroll:Ue,onStartMove:Me,onStopMove:me,spinSize:Rt,containerSize:J.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:X}),A&&l>J.width&&t.createElement(lt,{ref:je,prefixCls:u,scrollOffset:T,scrollRange:l,rtl:W,onScroll:Ue,onStartMove:Me,onStopMove:me,spinSize:gt,containerSize:J.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:X}))}var Gt=t.forwardRef(Kt);Gt.displayName="List";export{Gt as L};
