import{m as ee,V as oe,W as te,l as R,Y as re,r as l,C as V,e as E,aA as W,aB as ae,q as se,aC as ne,aD as le,aE as ce,aF as ie,aG as L,aH as de,ac as i,ad as ue,ae as ge,ag as w,ak as I,an as pe}from"./index-WbxodCRD.js";import{u as Ce,U as me,a as be,b as fe}from"./UserForm-BciScAUc.js";import{F as he,P as ye,S as M}from"./Table-CA1KdBH8.js";import{S as Se}from"./index--C26zxeg.js";const ve=e=>{const{paddingXXS:r,lineWidth:a,tagPaddingHorizontal:o,componentCls:t,calc:u}=e,c=u(o).sub(a).equal(),m=u(r).sub(a).equal();return{[t]:Object.assign(Object.assign({},re(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:c,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${R(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${t}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${t}-close-icon`]:{marginInlineStart:m,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${t}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${t}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:c}}),[`${t}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},z=e=>{const{lineWidth:r,fontSizeIcon:a,calc:o}=e,t=e.fontSizeSM;return te(e,{tagFontSize:t,tagLineHeight:R(o(e.lineHeightSM).mul(t).equal()),tagIconSize:o(a).sub(o(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},N=e=>({defaultBg:new oe(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),U=ee("Tag",e=>{const r=z(e);return ve(r)},N);var xe=function(e,r){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)r.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(a[o[t]]=e[o[t]]);return a};const je=l.forwardRef((e,r)=>{const{prefixCls:a,style:o,className:t,checked:u,onChange:c,onClick:m}=e,C=xe(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:b,tag:d}=l.useContext(V),y=x=>{c==null||c(!u),m==null||m(x)},f=b("tag",a),[$,O,g]=U(f),T=E(f,`${f}-checkable`,{[`${f}-checkable-checked`]:u},d==null?void 0:d.className,t,O,g);return $(l.createElement("span",Object.assign({},C,{ref:r,style:Object.assign(Object.assign({},o),d==null?void 0:d.style),className:T,onClick:y})))}),$e=e=>ae(e,(r,{textColor:a,lightBorderColor:o,lightColor:t,darkColor:u})=>({[`${e.componentCls}${e.componentCls}-${r}`]:{color:a,background:t,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:u,borderColor:u},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}})),Oe=W(["Tag","preset"],e=>{const r=z(e);return $e(r)},N);function Te(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const P=(e,r,a)=>{const o=Te(a);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${a}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},we=W(["Tag","status"],e=>{const r=z(e);return[P(r,"success","Success"),P(r,"processing","Info"),P(r,"error","Error"),P(r,"warning","Warning")]},N);var Pe=function(e,r){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)r.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(a[o[t]]=e[o[t]]);return a};const _e=l.forwardRef((e,r)=>{const{prefixCls:a,className:o,rootClassName:t,style:u,children:c,icon:m,color:C,onClose:b,bordered:d=!0,visible:y}=e,f=Pe(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:$,direction:O,tag:g}=l.useContext(V),[T,x]=l.useState(!0),s=se(f,["closeIcon","closable"]);l.useEffect(()=>{y!==void 0&&x(y)},[y]);const n=ne(C),h=le(C),S=n||h,D=Object.assign(Object.assign({backgroundColor:C&&!S?C:void 0},g==null?void 0:g.style),u),p=$("tag",a),[A,K,X]=U(p),G=E(p,g==null?void 0:g.className,{[`${p}-${C}`]:S,[`${p}-has-color`]:C&&!S,[`${p}-hidden`]:!T,[`${p}-rtl`]:O==="rtl",[`${p}-borderless`]:!d},o,t,K,X),B=j=>{j.stopPropagation(),b==null||b(j),!j.defaultPrevented&&x(!1)},[,Q]=ce(L(e),L(g),{closable:!1,closeIconRender:j=>{const Z=l.createElement("span",{className:`${p}-close-icon`,onClick:B},j);return ie(j,Z,v=>({onClick:F=>{var _;(_=v==null?void 0:v.onClick)===null||_===void 0||_.call(v,F),B(F)},className:E(v==null?void 0:v.className,`${p}-close-icon`)}))}}),Y=typeof f.onClick=="function"||c&&c.type==="a",k=m||null,J=k?l.createElement(l.Fragment,null,k,c&&l.createElement("span",null,c)):c,H=l.createElement("span",Object.assign({},s,{ref:r,className:G,style:D}),J,Q,n&&l.createElement(Oe,{key:"preset",prefixCls:p}),h&&l.createElement(we,{key:"status",prefixCls:p}));return A(Y?l.createElement(de,{component:"Tag"},H):H)}),q=_e;q.CheckableTag=je;const Ie=()=>{const[e,r]=l.useState([]),[a,o]=l.useState(""),[t,u]=l.useState(1),c=10,[m,C]=l.useState(0),b=l.useRef(null),d=l.useCallback(async()=>{const s=await Ce(t,c,a);r(s.data),C(s.total)},[t,a,c]);l.useEffect(()=>{d()},[d]);const y=s=>{u(s)},f=()=>{var s;(s=b.current)==null||s.open()},$=s=>{var n;(n=b.current)==null||n.open(s)},O=()=>{d()},g=s=>{pe.confirm({title:`确定删除用户 "${s.username}" 吗？`,onOk:async()=>{const n=await fe({id:s.id});I.success(n.message),d()}})},T=async s=>{try{const n=await be({id:s.id,enabled:s.enabled});n.code===200?(I.success(n.message),d()):I.error(n.error)}catch(n){console.log(n)}},x=[{title:"#",width:60,render:(s,n,h)=>h+1},{title:"用户名",dataIndex:"username"},{title:"昵称",dataIndex:"nickname"},{title:"拥有角色",render:(s,n)=>{var h;return i.jsx(M,{wrap:!0,children:(h=n.roleNames)==null?void 0:h.map(S=>i.jsx(q,{color:S.enabled?"blue":"default",children:S.role},S.role))})}},{title:"是否启用",width:100,render:(s,n)=>i.jsx(Se,{checked:n.enabled,onChange:h=>{n.enabled=h,T(n)}})},{title:"操作",width:180,render:(s,n)=>i.jsxs(M,{children:[i.jsx(w,{size:"small",type:"primary",onClick:()=>$(n),children:"编辑"}),i.jsx(w,{size:"small",type:"primary",danger:!0,onClick:()=>g(n),children:"删除"})]})}];return i.jsxs(ue,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[i.jsx(ge,{value:a,onChange:s=>o(s.target.value),placeholder:"请输入用户名",allowClear:!0,style:{width:200}}),i.jsxs("div",{children:[i.jsx(w,{type:"primary",onClick:d,children:"搜索"}),i.jsx(w,{type:"primary",onClick:f,style:{marginLeft:8},children:"新增用户"})]})]}),i.jsx(he,{columns:x,dataSource:e,rowKey:"id",pagination:!1}),i.jsx("div",{style:{marginTop:16,display:"flex",justifyContent:"flex-end"},children:i.jsx(ye,{current:t,total:m,pageSize:c,onChange:y,showSizeChanger:!1})}),i.jsx(me,{ref:b,onSuccess:O})]})},ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{q as T,ke as _};
