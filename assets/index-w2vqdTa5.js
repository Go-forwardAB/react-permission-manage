import{m as ee,V as oe,W as te,l as V,Y as re,r as l,C as W,e as z,aC as U,aD as ae,q as se,aE as ne,aF as le,aG as ce,aH as ie,aI as M,aJ as de,ab as ue,ac as c,ad as ge,ae as pe,ag as I,ak as E,ao as me}from"./index-D16-hzSU.js";import{u as Ce,U as be,a as fe,b as he}from"./UserForm-BYNGxuOt.js";import{F as ye,P as Se,S as R}from"./Table-S8WrFK1H.js";import{S as ve}from"./index-D2xcTPMs.js";const xe=e=>{const{paddingXXS:r,lineWidth:n,tagPaddingHorizontal:o,componentCls:t,calc:i}=e,d=i(o).sub(n).equal(),p=i(r).sub(n).equal();return{[t]:Object.assign(Object.assign({},re(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:d,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${V(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${t}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${t}-close-icon`]:{marginInlineStart:p,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${t}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${t}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:d}}),[`${t}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},N=e=>{const{lineWidth:r,fontSizeIcon:n,calc:o}=e,t=e.fontSizeSM;return te(e,{tagFontSize:t,tagLineHeight:V(o(e.lineHeightSM).mul(t).equal()),tagIconSize:o(n).sub(o(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},B=e=>({defaultBg:new oe(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),q=ee("Tag",e=>{const r=N(e);return xe(r)},B);var je=function(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)r.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(n[o[t]]=e[o[t]]);return n};const $e=l.forwardRef((e,r)=>{const{prefixCls:n,style:o,className:t,checked:i,onChange:d,onClick:p}=e,b=je(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:y,tag:u}=l.useContext(W),g=v=>{d==null||d(!i),p==null||p(v)},h=y("tag",n),[j,$,m]=q(h),O=z(h,`${h}-checkable`,{[`${h}-checkable-checked`]:i},u==null?void 0:u.className,t,$,m);return j(l.createElement("span",Object.assign({},b,{ref:r,style:Object.assign(Object.assign({},o),u==null?void 0:u.style),className:O,onClick:g})))}),Oe=e=>ae(e,(r,{textColor:n,lightBorderColor:o,lightColor:t,darkColor:i})=>({[`${e.componentCls}${e.componentCls}-${r}`]:{color:n,background:t,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}})),Te=U(["Tag","preset"],e=>{const r=N(e);return Oe(r)},B);function Ie(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const P=(e,r,n)=>{const o=Ie(n);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${n}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},Pe=U(["Tag","status"],e=>{const r=N(e);return[P(r,"success","Success"),P(r,"processing","Info"),P(r,"error","Error"),P(r,"warning","Warning")]},B);var _e=function(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)r.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(n[o[t]]=e[o[t]]);return n};const we=l.forwardRef((e,r)=>{const{prefixCls:n,className:o,rootClassName:t,style:i,children:d,icon:p,color:b,onClose:y,bordered:u=!0,visible:g}=e,h=_e(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:$,tag:m}=l.useContext(W),[O,v]=l.useState(!0),_=se(h,["closeIcon","closable"]);l.useEffect(()=>{g!==void 0&&v(g)},[g]);const s=ne(b),a=le(b),f=s||a,T=Object.assign(Object.assign({backgroundColor:b&&!f?b:void 0},m==null?void 0:m.style),i),C=j("tag",n),[A,K,X]=q(C),G=z(C,m==null?void 0:m.className,{[`${C}-${b}`]:f,[`${C}-has-color`]:b&&!f,[`${C}-hidden`]:!O,[`${C}-rtl`]:$==="rtl",[`${C}-borderless`]:!u},o,t,K,X),k=x=>{x.stopPropagation(),y==null||y(x),!x.defaultPrevented&&v(!1)},[,J]=ce(M(e),M(m),{closable:!1,closeIconRender:x=>{const Z=l.createElement("span",{className:`${C}-close-icon`,onClick:k},x);return ie(x,Z,S=>({onClick:L=>{var w;(w=S==null?void 0:S.onClick)===null||w===void 0||w.call(S,L),k(L)},className:z(S==null?void 0:S.className,`${C}-close-icon`)}))}}),Q=typeof h.onClick=="function"||d&&d.type==="a",H=p||null,Y=H?l.createElement(l.Fragment,null,H,d&&l.createElement("span",null,d)):d,F=l.createElement("span",Object.assign({},_,{ref:r,className:G,style:T}),Y,J,s&&l.createElement(Te,{key:"preset",prefixCls:C}),a&&l.createElement(Pe,{key:"status",prefixCls:C}));return A(Q?l.createElement(de,{component:"Tag"},F):F)}),D=we;D.CheckableTag=$e;const Ee=()=>{const e=ue(s=>s.userInfo),[r,n]=l.useState([]),[o,t]=l.useState(""),[i,d]=l.useState(1),p=10,[b,y]=l.useState(0),u=l.useRef(null),g=l.useCallback(async()=>{const s=await Ce(i,p,o);n(s.data),y(s.total)},[i,o,p]);l.useEffect(()=>{g()},[g]);const h=s=>{d(s)},j=()=>{var s;(s=u.current)==null||s.open()},$=s=>{var a;(a=u.current)==null||a.open(s)},m=()=>{g()},O=s=>{me.confirm({title:`确定删除用户 "${s.username}" 吗？`,onOk:async()=>{const a=await he({id:s.id});E.success(a.message),g()}})},v=async s=>{try{const a=await fe({id:s.id,enabled:s.enabled});a.code===200?(E.success(a.message),g()):E.error(a.error)}catch(a){console.log(a)}},_=[{title:"#",width:60,render:(s,a,f)=>f+1},{title:"用户名",dataIndex:"username"},{title:"昵称",dataIndex:"nickname"},{title:"拥有角色",render:(s,a)=>{var f;return c.jsx(R,{wrap:!0,children:(f=a.roleNames)==null?void 0:f.map(T=>c.jsx(D,{color:T.enabled?"blue":"default",children:T.role},T.role))})}},{title:"是否启用",width:100,render:(s,a)=>c.jsx(ve,{disabled:a.username==="admin"||a.id===e.id,checked:a.enabled,onChange:f=>{a.enabled=f,v(a)}})},{title:"操作",width:180,render:(s,a)=>c.jsxs(R,{children:[c.jsx(I,{size:"small",type:"primary",onClick:()=>$(a),children:"编辑"}),c.jsx(I,{size:"small",type:"primary",danger:!0,disabled:a.username==="admin"||a.id===e.id,onClick:()=>O(a),children:"删除"})]})}];return c.jsxs(ge,{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[c.jsx(pe,{value:o,onChange:s=>t(s.target.value),placeholder:"请输入用户名",allowClear:!0,style:{width:200}}),c.jsxs("div",{children:[c.jsx(I,{type:"primary",onClick:g,children:"搜索"}),c.jsx(I,{type:"primary",onClick:j,style:{marginLeft:8},children:"新增用户"})]})]}),c.jsx(ye,{columns:_,dataSource:r,rowKey:"id",pagination:!1}),c.jsx("div",{style:{marginTop:16,display:"flex",justifyContent:"flex-end"},children:c.jsx(Se,{current:i,total:b,pageSize:p,onChange:h,showSizeChanger:!1})}),c.jsx(be,{ref:u,onSuccess:m})]})},He=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));export{D as T,He as _};
