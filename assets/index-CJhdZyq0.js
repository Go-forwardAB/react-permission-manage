import{r as a,as as z,ac as t,ad as E,ae as L,ag as o,at as T,ak as u,an as D,au as F}from"./index-oQ3BWZpg.js";import{R as K}from"./RoleForm-D9d-fKFz.js";import{P as M}from"./Permission-HwTPr3gM.js";import{F as O,P as B,S as V}from"./Table-C6pRR_Kx.js";import{S as A}from"./index-o6sPnMYX.js";const $=()=>{const[p,h]=a.useState([]),[l,f]=a.useState(""),[i,g]=a.useState(1),r=10,[x,y]=a.useState(0),[j,m]=a.useState(!1),[S,b]=a.useState(0),c=a.useRef(null),n=a.useCallback(async()=>{const e=await z(i,r,l);h(e.data),y(e.total)},[i,l,r]);a.useEffect(()=>{n()},[n]);const C=e=>{g(e)},_=()=>{var e;(e=c.current)==null||e.open()},w=e=>{var s;(s=c.current)==null||s.open(e)},R=()=>{n()},k=e=>{b(e),m(!0)},P=e=>{D.confirm({title:`确定删除角色 "${e.name}" 吗？`,onOk:async()=>{const s=await F({id:e.id});u.success(s.message),n()}})},v=async e=>{try{const s=await T({id:e.id,enabled:e.enabled});s.code===200?(u.success(s.message),n()):u.error(s.error)}catch(s){console.log(s)}},I=[{title:"#",width:60,render:(e,s,d)=>d+1},{title:"角色名称",dataIndex:"name"},{title:"角色编码",dataIndex:"code"},{title:"角色描述",dataIndex:"description"},{title:"是否启用",width:100,render:(e,s)=>t.jsx(A,{checked:s.enabled,onChange:d=>{s.enabled=d,v(s)}})},{title:"操作",width:240,render:(e,s)=>t.jsxs(V,{children:[t.jsx(o,{size:"small",type:"primary",onClick:()=>w(s),children:"编辑"}),t.jsx(o,{size:"small",onClick:()=>k(s.id),children:"分配权限"}),t.jsx(o,{size:"small",type:"primary",danger:!0,onClick:()=>P(s),children:"删除"})]})}];return t.jsxs(E,{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[t.jsx(L,{value:l,onChange:e=>f(e.target.value),placeholder:"请输入角色名称",allowClear:!0,style:{width:200}}),t.jsxs("div",{children:[t.jsx(o,{type:"primary",onClick:n,children:"搜索"}),t.jsx(o,{type:"primary",onClick:_,style:{marginLeft:8},children:"新增角色"})]})]}),t.jsx(O,{columns:I,dataSource:p,rowKey:"id",pagination:!1}),t.jsx("div",{style:{marginTop:16,display:"flex",justifyContent:"flex-end"},children:t.jsx(B,{current:i,total:x,pageSize:r,onChange:C,showSizeChanger:!1})}),t.jsx(K,{ref:c,onSuccess:R}),t.jsx(M,{visible:j,onClose:()=>m(!1),roleId:S})]})},Q=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{Q as _};
